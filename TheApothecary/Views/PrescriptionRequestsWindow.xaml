<Window x:Class="TheApothecary.Views.PrescriptionRequestsWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Проверка рецептов" Height="600" Width="800"
        WindowStartupLocation="CenterOwner">

    <Grid Margin="10">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- Заголовок -->
        <StackPanel Grid.Row="0" Margin="0,0,0,10">
            <TextBlock Text="📋 Запросы на проверку рецептов" 
                      FontSize="18" FontWeight="Bold"
                      Foreground="#2C3E50"/>
            <TextBlock x:Name="StatusText" Text="Загрузка..." 
                      FontSize="12" Foreground="#7F8C8D"/>
        </StackPanel>

        <!-- Список запросов -->
        <ListView x:Name="RequestsListView" Grid.Row="1">
            <ListView.View>
                <GridView>
                    <GridViewColumn Header="ID" Width="40" DisplayMemberBinding="{Binding Id}"/>
                    <GridViewColumn Header="Пользователь" Width="120" DisplayMemberBinding="{Binding UserName}"/>
                    <GridViewColumn Header="Лекарство" Width="150" DisplayMemberBinding="{Binding MedicineName}"/>
                    <GridViewColumn Header="Дата запроса" Width="120">
                        <GridViewColumn.DisplayMemberBinding>
                            <Binding Path="RequestDate" StringFormat="{}{0:dd.MM.yyyy HH:mm}"/>
                        </GridViewColumn.DisplayMemberBinding>
                    </GridViewColumn>
                    <GridViewColumn Header="Статус" Width="100">
                        <GridViewColumn.CellTemplate>
                            <DataTemplate>
                                <TextBlock Text="{Binding Status}">
                                    <TextBlock.Style>
                                        <Style TargetType="TextBlock">
                                            <Setter Property="Foreground" Value="#7F8C8D"/>
                                            <Style.Triggers>
                                                <DataTrigger Binding="{Binding Status}" Value="Pending">
                                                    <Setter Property="Foreground" Value="#F39C12"/>
                                                    <Setter Property="FontWeight" Value="Bold"/>
                                                </DataTrigger>
                                                <DataTrigger Binding="{Binding Status}" Value="Approved">
                                                    <Setter Property="Foreground" Value="#27AE60"/>
                                                </DataTrigger>
                                                <DataTrigger Binding="{Binding Status}" Value="Rejected">
                                                    <Setter Property="Foreground" Value="#E74C3C"/>
                                                </DataTrigger>
                                            </Style.Triggers>
                                        </Style>
                                    </TextBlock.Style>
                                </TextBlock>
                            </DataTemplate>
                        </GridViewColumn.CellTemplate>
                    </GridViewColumn>
                </GridView>
            </ListView.View>
        </ListView>

        <!-- Панель управления -->
        <Border Grid.Row="2" Background="#F8F9FA" Padding="10" Margin="0,10,0,0">
            <StackPanel>
                <TextBlock Text="Выбранный запрос:" FontWeight="SemiBold" Margin="0,0,0,5"/>
                <StackPanel x:Name="SelectedRequestPanel" Visibility="Collapsed">
                    <TextBlock x:Name="SelectedRequestText" TextWrapping="Wrap" Margin="0,0,0,10"/>

                    <StackPanel Orientation="Horizontal">
                        <Button x:Name="ApproveButton" Content="✅ Одобрить рецепт" 
                               Click="ApproveButton_Click"
                               Background="#27AE60" Foreground="White"
                               Width="150" Height="35" Margin="0,0,10,0"/>

                        <Button x:Name="RejectButton" Content="❌ Отклонить рецепт" 
                               Click="RejectButton_Click"
                               Background="#E74C3C" Foreground="White"
                               Width="150" Height="35" Margin="0,0,10,0"/>

                        <TextBox x:Name="NotesTextBox" 
                                Width="300" Height="35"
                                Padding="5"
                                Text="Примечание (необязательно)"/>
                    </StackPanel>
                </StackPanel>

                <Button x:Name="CloseButton" Content="Закрыть" 
                       Click="CloseButton_Click"
                       HorizontalAlignment="Right"
                       Width="100" Height="35" Margin="0,10,0,0"/>
            </StackPanel>
        </Border>
    </Grid>
</Window>